import{j as t}from"./jsx-runtime-Dg5ontpF.js";import{r as o}from"./iframe-C0moAmFQ.js";import{P as N}from"./index-CqTJiuxk.js";import{s as D}from"./index-DBecVRUa.js";import{c as _}from"./utils-CDN07tui.js";import"./preload-helper-PPVm8Dsz.js";import"./index-CF0hAQ6f.js";import"./index-BxU64hHK.js";function T(e,a=[]){let n=[];function l(r,u){const s=o.createContext(u);s.displayName=r+"Context";const d=n.length;n=[...n,u];const i=m=>{const{scope:j,children:C,...g}=m,B=j?.[e]?.[d]||s,$=o.useMemo(()=>g,Object.values(g));return t.jsx(B.Provider,{value:$,children:C})};i.displayName=r+"Provider";function f(m,j){const C=j?.[e]?.[d]||s,g=o.useContext(C);if(g)return g;if(u!==void 0)return u;throw new Error(`\`${m}\` must be used within \`${r}\``)}return[i,f]}const c=()=>{const r=n.map(u=>o.createContext(u));return function(s){const d=s?.[e]||r;return o.useMemo(()=>({[`__scope${e}`]:{...s,[e]:d}}),[s,d])}};return c.scopeName=e,[l,H(c,...a)]}function H(...e){const a=e[0];if(e.length===1)return a;const n=()=>{const l=e.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(r){const u=l.reduce((s,{useScope:d,scopeName:i})=>{const m=d(r)[`__scope${i}`];return{...s,...m}},{});return o.useMemo(()=>({[`__scope${a.scopeName}`]:u}),[u])}};return n.scopeName=a.scopeName,n}function O(e){const a=o.useRef(e);return o.useEffect(()=>{a.current=e}),o.useMemo(()=>(...n)=>a.current?.(...n),[])}var I=globalThis?.document?o.useLayoutEffect:()=>{};function W(){return D.useSyncExternalStore(J,()=>!0,()=>!1)}function J(){return()=>{}}var L="Avatar",[q]=T(L),[G,E]=q(L),y=o.forwardRef((e,a)=>{const{__scopeAvatar:n,...l}=e,[c,r]=o.useState("idle");return t.jsx(G,{scope:n,imageLoadingStatus:c,onImageLoadingStatusChange:r,children:t.jsx(N.span,{...l,ref:a})})});y.displayName=L;var F="AvatarImage",R=o.forwardRef((e,a)=>{const{__scopeAvatar:n,src:l,onLoadingStatusChange:c=()=>{},...r}=e,u=E(F,n),s=K(l,r),d=O(i=>{c(i),u.onImageLoadingStatusChange(i)});return I(()=>{s!=="idle"&&d(s)},[s,d]),s==="loaded"?t.jsx(N.img,{...r,ref:a,src:l}):null});R.displayName=F;var P="AvatarFallback",M=o.forwardRef((e,a)=>{const{__scopeAvatar:n,delayMs:l,...c}=e,r=E(P,n),[u,s]=o.useState(l===void 0);return o.useEffect(()=>{if(l!==void 0){const d=window.setTimeout(()=>s(!0),l);return()=>window.clearTimeout(d)}},[l]),u&&r.imageLoadingStatus!=="loaded"?t.jsx(N.span,{...c,ref:a}):null});M.displayName=P;function w(e,a){return e?a?(e.src!==a&&(e.src=a),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function K(e,{referrerPolicy:a,crossOrigin:n}){const l=W(),c=o.useRef(null),r=l?(c.current||(c.current=new window.Image),c.current):null,[u,s]=o.useState(()=>w(r,e));return I(()=>{s(w(r,e))},[r,e]),I(()=>{const d=m=>()=>{s(m)};if(!r)return;const i=d("loaded"),f=d("error");return r.addEventListener("load",i),r.addEventListener("error",f),a&&(r.referrerPolicy=a),typeof n=="string"&&(r.crossOrigin=n),()=>{r.removeEventListener("load",i),r.removeEventListener("error",f)}},[r,n,a]),u}var V=y,z=R,Q=M;function p({className:e,...a}){return t.jsx(V,{className:_("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...a})}function h({className:e,...a}){return t.jsx(z,{className:_("aspect-square h-full w-full",e),...a})}function v({className:e,...a}){return t.jsx(Q,{className:_("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...a})}p.__docgenInfo={description:"",methods:[],displayName:"Avatar"};h.__docgenInfo={description:"",methods:[],displayName:"AvatarImage"};v.__docgenInfo={description:"",methods:[],displayName:"AvatarFallback"};const ne={title:"shared/ui/Avatar",component:p,parameters:{layout:"centered"},tags:["autodocs"]},A={render:()=>t.jsxs(p,{children:[t.jsx(h,{src:"https://github.com/shadcn.png",alt:"@shadcn"}),t.jsx(v,{children:"CN"})]})},x={render:()=>t.jsx(p,{children:t.jsx(v,{children:"JD"})})},b={render:()=>t.jsxs(p,{children:[t.jsx(h,{src:"https://broken-image-url.com/image.png",alt:"Broken"}),t.jsx(v,{children:"BI"})]})},S={render:()=>t.jsxs(p,{className:"h-20 w-20",children:[t.jsx(h,{src:"https://github.com/shadcn.png",alt:"@shadcn"}),t.jsx(v,{children:"CN"})]})},k={render:()=>t.jsxs(p,{className:"h-8 w-8",children:[t.jsx(h,{src:"https://github.com/shadcn.png",alt:"@shadcn"}),t.jsx(v,{children:"CN"})]})};A.parameters={...A.parameters,docs:{...A.parameters?.docs,source:{originalSource:`{
  render: () => <Avatar>
      <AvatarImage src="https://github.com/shadcn.png" alt="@shadcn" />
      <AvatarFallback>CN</AvatarFallback>
    </Avatar>
}`,...A.parameters?.docs?.source}}};x.parameters={...x.parameters,docs:{...x.parameters?.docs,source:{originalSource:`{
  render: () => <Avatar>
      <AvatarFallback>JD</AvatarFallback>
    </Avatar>
}`,...x.parameters?.docs?.source}}};b.parameters={...b.parameters,docs:{...b.parameters?.docs,source:{originalSource:`{
  render: () => <Avatar>
      <AvatarImage src="https://broken-image-url.com/image.png" alt="Broken" />
      <AvatarFallback>BI</AvatarFallback>
    </Avatar>
}`,...b.parameters?.docs?.source}}};S.parameters={...S.parameters,docs:{...S.parameters?.docs,source:{originalSource:`{
  render: () => <Avatar className="h-20 w-20">
      <AvatarImage src="https://github.com/shadcn.png" alt="@shadcn" />
      <AvatarFallback>CN</AvatarFallback>
    </Avatar>
}`,...S.parameters?.docs?.source}}};k.parameters={...k.parameters,docs:{...k.parameters?.docs,source:{originalSource:`{
  render: () => <Avatar className="h-8 w-8">
      <AvatarImage src="https://github.com/shadcn.png" alt="@shadcn" />
      <AvatarFallback>CN</AvatarFallback>
    </Avatar>
}`,...k.parameters?.docs?.source}}};const se=["Default","FallbackOnly","WithBrokenImage","Large","Small"];export{A as Default,x as FallbackOnly,S as Large,k as Small,b as WithBrokenImage,se as __namedExportsOrder,ne as default};
